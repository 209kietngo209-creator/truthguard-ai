<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>TruthGuard AI v3 ‚Äì H·ªá th·ªëng ph√°t hi·ªán tin gi·∫£</title>
<style>
/* ================================================
   VARIABLES & RESET
================================================ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --c-900:#0a1628;--c-800:#0f2044;--c-700:#1a3a7c;--c-600:#2563eb;
  --c-500:#3b82f6;--c-400:#60a5fa;--c-200:#bfdbfe;--c-100:#dbeafe;--c-50:#eff6ff;
  --g:#16a34a;--g2:#dcfce7;--y:#d97706;--y2:#fef3c7;--r:#dc2626;--r2:#fee2e2;
  --s9:#0f172a;--s7:#334155;--s5:#64748b;--s3:#cbd5e1;--s1:#f1f5f9;--s0:#f8fafc;
  --w:#fff;
  --br:14px;--br2:10px;--br3:8px;
  --sh:0 20px 60px rgba(10,22,40,.18);
  --shm:0 8px 28px rgba(37,99,235,.14);
  --t:.3s cubic-bezier(.4,0,.2,1);
}
html{scroll-behavior:smooth}
body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--s0);color:var(--s9);min-height:100vh}

/* ================================================
   SCROLLBAR
================================================ */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--s1)}
::-webkit-scrollbar-thumb{background:var(--c-400);border-radius:3px}

/* ================================================
   NAV
================================================ */
nav{
  position:sticky;top:0;z-index:200;
  background:rgba(255,255,255,.9);backdrop-filter:blur(20px);
  border-bottom:1px solid rgba(37,99,235,.1);
  box-shadow:0 2px 12px rgba(0,0,0,.05);
}
.nav-i{
  max-width:1140px;margin:0 auto;
  padding:0 24px;height:62px;
  display:flex;align-items:center;justify-content:space-between;gap:16px;
}
.logo{display:flex;align-items:center;gap:10px;text-decoration:none;flex-shrink:0}
.logo-box{
  width:38px;height:38px;border-radius:10px;
  background:linear-gradient(135deg,var(--c-700),var(--c-500));
  display:grid;place-items:center;font-size:18px;
  box-shadow:0 4px 12px rgba(37,99,235,.35);
}
.logo-text{font-weight:900;font-size:1.05rem;color:var(--c-900)}
.logo-sub{font-size:.65rem;color:var(--s5);font-weight:400;display:block}
.nav-right{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.nbadge{
  font-size:.7rem;font-weight:700;padding:4px 12px;
  border-radius:999px;letter-spacing:.05em;white-space:nowrap;
}
.nbadge.blue{background:var(--c-100);color:var(--c-700)}
.nbadge.green{background:var(--g2);color:#14532d}
.ver-chip{
  font-size:.72rem;font-weight:800;padding:3px 10px;
  background:linear-gradient(135deg,var(--c-600),var(--c-400));
  color:#fff;border-radius:999px;
}

/* ================================================
   HERO
================================================ */
.hero{
  background:linear-gradient(160deg,var(--c-900) 0%,var(--c-800) 50%,var(--c-700) 100%);
  padding:80px 24px 110px;text-align:center;position:relative;overflow:hidden;
}
.hero::after{
  content:'';position:absolute;bottom:-1px;left:0;right:0;height:70px;
  background:var(--s0);clip-path:ellipse(55% 100% at 50% 100%);
}
/* Animated grid */
.hero-grid{
  position:absolute;inset:0;
  background-image:linear-gradient(rgba(96,165,250,.07) 1px,transparent 1px),
                   linear-gradient(90deg,rgba(96,165,250,.07) 1px,transparent 1px);
  background-size:50px 50px;
  animation:gridMove 20s linear infinite;
}
@keyframes gridMove{0%{transform:translateY(0)}100%{transform:translateY(50px)}}
.blob{position:absolute;border-radius:50%;filter:blur(100px);opacity:.1;pointer-events:none}
.b1{width:500px;height:500px;background:var(--c-400);top:-150px;left:-120px}
.b2{width:350px;height:350px;background:#818cf8;bottom:-50px;right:-80px}
.b3{width:250px;height:250px;background:#34d399;bottom:80px;left:10%}

.hero-badge{
  display:inline-flex;align-items:center;gap:8px;
  background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);
  border-radius:999px;padding:7px 20px;font-size:.78rem;
  color:rgba(255,255,255,.9);margin-bottom:24px;backdrop-filter:blur(8px);
}
.hero h1{
  font-size:clamp(1.9rem,5.5vw,3.4rem);font-weight:900;color:#fff;
  letter-spacing:-1.5px;line-height:1.12;margin-bottom:18px;
}
.hero h1 .hi{
  background:linear-gradient(90deg,#93c5fd,#a5f3fc,#6ee7b7);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.hero-desc{font-size:clamp(.9rem,2.3vw,1.1rem);color:rgba(255,255,255,.7);max-width:580px;margin:0 auto 32px}

.hero-chips{display:flex;justify-content:center;flex-wrap:wrap;gap:10px;margin-bottom:36px}
.chip{
  display:flex;align-items:center;gap:6px;
  background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);
  border-radius:999px;padding:6px 16px;font-size:.78rem;color:rgba(255,255,255,.8);
  backdrop-filter:blur(6px);
}
.chip-dot{width:7px;height:7px;border-radius:50%;flex-shrink:0}
.cd-g{background:#4ade80}.cd-b{background:#60a5fa}.cd-y{background:#fbbf24}.cd-p{background:#a78bfa}

.hero-stats{display:flex;justify-content:center;gap:32px;flex-wrap:wrap}
.stat{text-align:center;color:rgba(255,255,255,.85)}
.stat strong{display:block;font-size:2rem;font-weight:900;color:#fff;line-height:1}
.stat small{font-size:.72rem;opacity:.6;margin-top:4px;display:block}

/* ================================================
   MAIN WRAPPER
================================================ */
.wrap{max-width:960px;margin:0 auto;padding:0 20px 100px}

/* ================================================
   TABS
================================================ */
.tab-bar{
  display:flex;gap:4px;
  background:var(--w);border-radius:var(--br);
  box-shadow:var(--sh);padding:6px;
  margin-top:-62px;position:relative;z-index:10;
  border:1px solid rgba(37,99,235,.06);
}
.tab-btn{
  flex:1;padding:13px 8px;border:none;background:transparent;
  font-family:inherit;font-size:.88rem;font-weight:600;
  color:var(--s5);border-radius:10px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;gap:7px;
  transition:var(--t);
}
.tab-btn:hover{background:var(--c-50);color:var(--c-600)}
.tab-btn.active{
  background:linear-gradient(135deg,var(--c-600),var(--c-500));
  color:#fff;box-shadow:0 4px 14px rgba(37,99,235,.35);
}

/* ================================================
   PANELS
================================================ */
.panel{display:none;margin-top:20px}
.panel.active{display:block}

/* ================================================
   CARD
================================================ */
.card{
  background:var(--w);border-radius:var(--br);
  box-shadow:var(--shm);padding:28px;
  border:1px solid rgba(37,99,235,.06);
  margin-bottom:18px;
}
.card-hd{
  display:flex;align-items:flex-start;justify-content:space-between;
  flex-wrap:wrap;gap:12px;margin-bottom:18px;
}
.card-hd h3{font-size:1.05rem;font-weight:700}
.card-hd p{font-size:.82rem;color:var(--s5);margin-top:3px}
.sec-label{
  font-size:.7rem;font-weight:700;letter-spacing:.1em;
  text-transform:uppercase;color:var(--c-600);
  display:flex;align-items:center;gap:8px;margin-bottom:8px;
}

/* ================================================
   TEXTAREA
================================================ */
textarea{
  width:100%;min-height:170px;padding:16px;
  border:2px solid var(--s3);border-radius:var(--br2);
  font-size:.96rem;font-family:inherit;color:var(--s9);
  resize:vertical;background:var(--s0);
  transition:border-color var(--t),box-shadow var(--t);line-height:1.65;
}
textarea:focus{
  outline:none;border-color:var(--c-500);background:var(--w);
  box-shadow:0 0 0 4px rgba(59,130,246,.1);
}
textarea::placeholder{color:var(--s5)}

/* ================================================
   URL INPUT
================================================ */
.url-row{display:flex;gap:10px;flex-wrap:wrap}
.url-input{
  flex:1;min-width:200px;padding:13px 16px;
  border:2px solid var(--s3);border-radius:var(--br2);
  font-size:.94rem;font-family:inherit;color:var(--s9);
  background:var(--s0);transition:border-color var(--t),box-shadow var(--t);
}
.url-input:focus{
  outline:none;border-color:var(--c-500);background:var(--w);
  box-shadow:0 0 0 4px rgba(59,130,246,.1);
}
.url-input::placeholder{color:var(--s5)}
.url-fetch-btn{
  padding:13px 22px;background:var(--s1);
  border:2px solid var(--s3);border-radius:var(--br2);
  font-family:inherit;font-size:.88rem;font-weight:600;
  color:var(--s7);cursor:pointer;transition:var(--t);white-space:nowrap;
}
.url-fetch-btn:hover{border-color:var(--c-400);color:var(--c-600);background:var(--c-50)}
.url-note{
  margin-top:10px;padding:10px 14px;
  background:#fefce8;border:1px solid #fde68a;border-radius:var(--br3);
  font-size:.8rem;color:#92400e;display:flex;gap:8px;align-items:flex-start;
}

/* ================================================
   QUICK BTNS
================================================ */
.quick-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
.qbtn{
  font-size:.74rem;font-weight:600;padding:6px 14px;border-radius:999px;
  border:1.5px solid var(--s3);background:var(--s0);color:var(--s5);
  cursor:pointer;transition:var(--t);font-family:inherit;
  display:flex;align-items:center;gap:5px;
}
.qbtn:hover{border-color:var(--c-400);color:var(--c-600);background:var(--c-50)}
.qbtn.r:hover{border-color:#fca5a5;color:var(--r);background:var(--r2)}
.qbtn.y:hover{border-color:#fcd34d;color:var(--y);background:var(--y2)}
.qbtn.g:hover{border-color:#86efac;color:var(--g);background:var(--g2)}

/* ================================================
   COUNTER ROW
================================================ */
.cnt-row{
  display:flex;align-items:center;justify-content:space-between;
  flex-wrap:wrap;gap:8px;margin-top:10px;
}
.cnt-info{font-size:.76rem;color:var(--s5)}
.cnt-info b{color:var(--c-600)}
.clr-btn{
  font-size:.76rem;color:var(--s5);background:none;border:none;
  cursor:pointer;font-family:inherit;transition:color var(--t);
}
.clr-btn:hover{color:var(--r)}

/* ================================================
   ANALYZE BUTTON
================================================ */
.btn-analyze{
  width:100%;margin-top:18px;padding:16px;
  background:linear-gradient(135deg,var(--c-700),var(--c-600),var(--c-500));
  color:#fff;font-size:1.05rem;font-weight:800;
  border:none;border-radius:var(--br2);cursor:pointer;
  display:flex;align-items:center;justify-content:center;gap:10px;
  box-shadow:0 6px 24px rgba(37,99,235,.4);
  transition:transform var(--t),box-shadow var(--t);
  position:relative;overflow:hidden;font-family:inherit;
}
.btn-analyze::before{
  content:'';position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,.12),transparent);
}
.btn-analyze:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 32px rgba(37,99,235,.5)}
.btn-analyze:active:not(:disabled){transform:translateY(0)}
.btn-analyze:disabled{opacity:.6;cursor:not-allowed;transform:none}
.spin{
  width:20px;height:20px;border:3px solid rgba(255,255,255,.3);
  border-top-color:#fff;border-radius:50%;
  animation:sp .65s linear infinite;display:none;
}
@keyframes sp{to{transform:rotate(360deg)}}
/* Shimmer bar */
.shimmer{
  position:absolute;inset:0;
  background:linear-gradient(90deg,transparent 0%,rgba(255,255,255,.18) 50%,transparent 100%);
  transform:translateX(-100%);
}
.shimmer.go{animation:shim 1.8s ease infinite}
@keyframes shim{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}

/* ================================================
   PROGRESS STEP
================================================ */
.progress-steps{
  margin:20px 0;display:flex;flex-direction:column;gap:10px;
}
.pstep{
  display:flex;align-items:center;gap:12px;
  font-size:.85rem;color:var(--s5);
}
.pstep-ic{
  width:28px;height:28px;border-radius:50%;border:2px solid var(--s3);
  display:grid;place-items:center;flex-shrink:0;font-size:12px;
  transition:var(--t);
}
.pstep.done .pstep-ic{background:var(--g);border-color:var(--g);color:#fff}
.pstep.active .pstep-ic{background:var(--c-500);border-color:var(--c-500);color:#fff;animation:pulse 1s ease infinite}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(59,130,246,.4)}50%{box-shadow:0 0 0 8px rgba(59,130,246,0)}}
.pstep-bar{flex:1;height:2px;background:var(--s3);border-radius:2px;overflow:hidden}
.pstep-fill{height:100%;width:0%;background:var(--c-500);border-radius:2px;transition:width var(--t)}

/* ================================================
   RESULT SECTION
================================================ */
#result{display:none;margin-top:22px}

/* Verdict Banner */
.verdict{
  border-radius:var(--br);padding:26px 28px;
  display:flex;align-items:center;gap:22px;flex-wrap:wrap;
  margin-bottom:18px;border:1px solid transparent;position:relative;overflow:hidden;
}
.verdict::before{
  content:'';position:absolute;right:-30px;top:-30px;
  width:160px;height:160px;border-radius:50%;opacity:.07;
}
.verdict.safe{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-color:#bbf7d0}
.verdict.safe::before{background:var(--g)}
.verdict.warn{background:linear-gradient(135deg,#fffbeb,#fef3c7);border-color:#fde68a}
.verdict.warn::before{background:var(--y)}
.verdict.danger{background:linear-gradient(135deg,#fef2f2,#fee2e2);border-color:#fecaca}
.verdict.danger::before{background:var(--r)}

.v-icon{
  width:66px;height:66px;border-radius:18px;
  display:grid;place-items:center;font-size:30px;flex-shrink:0;
}
.safe .v-icon{background:linear-gradient(135deg,#4ade80,var(--g))}
.warn .v-icon{background:linear-gradient(135deg,#fbbf24,var(--y))}
.danger .v-icon{background:linear-gradient(135deg,#f87171,var(--r))}
.v-info{flex:1;min-width:180px}
.v-title{font-size:1.35rem;font-weight:900;margin-bottom:4px}
.safe .v-title{color:#14532d}.warn .v-title{color:#78350f}.danger .v-title{color:#7f1d1d}
.v-sub{font-size:.88rem;opacity:.75;line-height:1.5}
.safe .v-sub{color:#166534}.warn .v-sub{color:#92400e}.danger .v-sub{color:#991b1b}

/* Score ring */
.score-ring{position:relative;width:90px;height:90px;flex-shrink:0}
.score-ring svg{position:absolute;inset:0;transform:rotate(-90deg)}
.score-ring svg circle{fill:none;stroke-width:7;stroke-linecap:round}
.ring-bg{stroke:rgba(0,0,0,.08)}
.ring-fill{stroke-dasharray:245;stroke-dashoffset:245;transition:stroke-dashoffset 1.4s cubic-bezier(.34,1.56,.64,1)}
.safe .ring-fill{stroke:var(--g)}.warn .ring-fill{stroke:var(--y)}.danger .ring-fill{stroke:var(--r)}
.ring-center{
  position:absolute;inset:0;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
}
.ring-num{font-size:1.5rem;font-weight:900;line-height:1}
.ring-unit{font-size:.6rem;color:var(--s5)}

/* ================================================
   METRICS GRID
================================================ */
.metrics{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-bottom:18px}
.metric{
  background:var(--w);border-radius:var(--br2);padding:18px;
  border:1px solid var(--s1);box-shadow:0 2px 8px rgba(0,0,0,.04);
}
.metric-hd{display:flex;align-items:center;gap:8px;margin-bottom:12px}
.metric-ic{
  width:30px;height:30px;border-radius:8px;background:var(--c-50);
  display:grid;place-items:center;font-size:15px;flex-shrink:0;
}
.metric-label{font-size:.75rem;font-weight:700;color:var(--s5);text-transform:uppercase;letter-spacing:.06em}
.metric-val{font-size:1rem;font-weight:700;margin-bottom:8px}
.mbar{height:8px;background:var(--s1);border-radius:999px;overflow:hidden}
.mfill{height:100%;border-radius:999px;transition:width 1.1s cubic-bezier(.4,0,.2,1)}
.mfill.g{background:linear-gradient(90deg,#4ade80,var(--g))}
.mfill.y{background:linear-gradient(90deg,#fbbf24,var(--y))}
.mfill.r{background:linear-gradient(90deg,#f87171,var(--r))}
.mfill.b{background:linear-gradient(90deg,var(--c-400),var(--c-600))}

/* ================================================
   DETAIL CARDS GRID
================================================ */
.detail-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:18px}
@media(max-width:620px){.detail-grid{grid-template-columns:1fr}}
.dc{
  background:var(--w);border-radius:var(--br2);padding:20px;
  border:1px solid var(--s1);box-shadow:0 2px 8px rgba(0,0,0,.04);
}
.dc.full{grid-column:1/-1}
.dc-hd{
  display:flex;align-items:center;gap:8px;
  font-size:.72rem;font-weight:700;text-transform:uppercase;
  letter-spacing:.08em;color:var(--s5);margin-bottom:14px;
}
.dc-hd .ic2{
  width:26px;height:26px;border-radius:7px;background:var(--c-50);
  display:grid;place-items:center;font-size:13px;flex-shrink:0;
}

/* Signal items */
.sig{
  display:flex;align-items:flex-start;gap:10px;
  padding:9px 12px;border-radius:8px;margin-bottom:7px;
  font-size:.86rem;line-height:1.5;
}
.sig:last-child{margin-bottom:0}
.sig.r{background:#fef2f2;color:#991b1b}
.sig.y{background:#fffbeb;color:#92400e}
.sig.g{background:#f0fdf4;color:#14532d}
.sig.b{background:var(--c-50);color:#1e3a8a}
.sig-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;margin-top:5px}
.sig.r .sig-dot{background:var(--r)}.sig.y .sig-dot{background:var(--y)}
.sig.g .sig-dot{background:var(--g)}.sig.b .sig-dot{background:var(--c-500)}

/* Keyword chips */
.kw-list{display:flex;flex-wrap:wrap;gap:7px}
.kw{
  font-size:.76rem;font-weight:600;padding:4px 11px;border-radius:999px;
}
.kw.r{background:#fee2e2;color:var(--r)}.kw.y{background:#fef3c7;color:var(--y)}
.kw.g{background:#dcfce7;color:var(--g)}.kw.b{background:var(--c-100);color:var(--c-700)}

/* Suggestions */
.sug{
  display:flex;gap:12px;padding:12px 14px;
  border-radius:8px;border:1px solid var(--s1);background:var(--s0);
  margin-bottom:8px;font-size:.86rem;color:var(--s7);line-height:1.55;
}
.sug:last-child{margin-bottom:0}
.sug-n{
  width:24px;height:24px;border-radius:7px;
  background:var(--c-600);color:#fff;
  font-size:.7rem;font-weight:700;display:grid;place-items:center;flex-shrink:0;
}

/* Emotion meter */
.emo-row{display:flex;gap:8px;flex-wrap:wrap}
.emo-pill{
  display:flex;align-items:center;gap:6px;
  padding:6px 14px;border-radius:999px;font-size:.82rem;font-weight:600;
  border:1.5px solid;
}
.emo-pill.active-pos{background:#f0fdf4;border-color:#86efac;color:#14532d}
.emo-pill.active-neg{background:#fef2f2;border-color:#fca5a5;color:#7f1d1d}
.emo-pill.active-neu{background:var(--c-50);border-color:var(--c-200);color:var(--c-700)}
.emo-pill.inactive{background:var(--s1);border-color:var(--s3);color:var(--s5)}
.emo-dot{width:8px;height:8px;border-radius:50%}

/* ================================================
   TECH SECTION
================================================ */
.tech-section{margin-top:44px}
.tech-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-top:18px}
.tech-card{
  background:var(--w);border-radius:var(--br2);padding:20px;
  border:1px solid var(--s1);box-shadow:0 2px 8px rgba(0,0,0,.04);
  transition:transform var(--t),box-shadow var(--t);
}
.tech-card:hover{transform:translateY(-3px);box-shadow:var(--shm)}
.tech-badge{
  display:inline-block;font-size:.65rem;font-weight:700;padding:3px 10px;
  border-radius:999px;margin-bottom:10px;letter-spacing:.06em;
}
.tech-badge.proto{background:var(--y2);color:#78350f}
.tech-badge.future{background:var(--c-100);color:var(--c-700)}
.tech-badge.active{background:var(--g2);color:#14532d}
.tech-card h4{font-size:.9rem;font-weight:700;color:var(--s9);margin-bottom:6px}
.tech-card p{font-size:.8rem;color:var(--s5);line-height:1.55}

/* ================================================
   SIGNS SECTION
================================================ */
.signs-section{margin-top:44px}
.signs-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:12px;margin-top:18px}
.sign-card{
  background:var(--w);border-radius:var(--br2);padding:18px;
  border:1px solid var(--s1);box-shadow:0 2px 8px rgba(0,0,0,.04);
  transition:transform var(--t),box-shadow var(--t);
}
.sign-card:hover{transform:translateY(-3px);box-shadow:var(--shm)}
.sign-em{font-size:26px;margin-bottom:8px;display:block}
.sign-card h4{font-size:.88rem;font-weight:700;margin-bottom:5px}
.sign-card p{font-size:.78rem;color:var(--s5);line-height:1.5}

/* ================================================
   SECTION TITLE
================================================ */
.sec-title-wrap{text-align:center;margin-bottom:6px}
.sec-divider{
  display:flex;align-items:center;gap:12px;margin-bottom:22px;
}
.sec-divider::before,.sec-divider::after{content:'';flex:1;height:1px;background:var(--s3)}
.sec-divider span{
  font-size:.72rem;font-weight:700;text-transform:uppercase;
  letter-spacing:.1em;color:var(--s5);white-space:nowrap;
}
.sec-title{font-size:1.25rem;font-weight:800;color:var(--s9);margin-bottom:5px}
.sec-sub{font-size:.84rem;color:var(--s5)}

/* ================================================
   FOOTER
================================================ */
footer{
  background:var(--c-900);color:rgba(255,255,255,.6);
  text-align:center;padding:40px 20px;font-size:.8rem;
}
footer .f-logo{font-size:1rem;font-weight:900;color:#fff;margin-bottom:6px}
footer a{color:var(--c-400);text-decoration:none}
footer .f-chips{display:flex;justify-content:center;flex-wrap:wrap;gap:8px;margin-top:14px}
footer .f-chip{
  font-size:.68rem;padding:3px 10px;border-radius:999px;
  background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);
  color:rgba(255,255,255,.6);
}

/* ================================================
   ANIMATIONS
================================================ */
.fade-up{opacity:0;transform:translateY(22px);transition:opacity .55s ease,transform .55s ease}
.fade-up.in{opacity:1;transform:translateY(0)}
@keyframes fadeIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.ai{animation:fadeIn .45s ease both}
.ai2{animation-delay:.08s}.ai3{animation-delay:.16s}.ai4{animation-delay:.24s}

/* ================================================
   RESPONSIVE
================================================ */
@media(max-width:560px){
  .hero{padding:60px 16px 95px}
  .card{padding:18px 16px}
  .verdict{flex-direction:column;text-align:center}
  .tab-btn span{display:none}
  nav .nbadge{display:none}
}
</style>
</head>
<body>

<!-- ======= NAV ======= -->
<nav>
  <div class="nav-i">
    <a class="logo" href="#">
      <div class="logo-box">üõ°Ô∏è</div>
      <div>
        <span class="logo-text">TruthGuard AI</span>
        <span class="logo-sub">H·ªá th·ªëng ph√°t hi·ªán tin gi·∫£</span>
      </div>
    </a>
    <div class="nav-right">
      <span class="nbadge blue">üéì D·ª± √°n h·ªçc sinh</span>
      <span class="nbadge green">‚úÖ Prototype</span>
      <span class="ver-chip">v3.0</span>
    </div>
  </div>
</nav>

<!-- ======= HERO ======= -->
<header class="hero">
  <div class="hero-grid"></div>
  <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>
  <div style="position:relative;z-index:1">
    <div class="hero-badge">üèÜ Cu·ªôc thi AI cho h·ªçc sinh 2025 ¬∑ Phi√™n b·∫£n Prototype</div>
    <h1>Tr√≠ Tu·ªá Nh√¢n T·∫°o<br>ph√°t hi·ªán <span class="hi">Tin Gi·∫£</span> t·ª©c th√¨</h1>
    <p class="hero-desc">Ph√¢n t√≠ch ƒëa chi·ªÅu: c·∫£m x√∫c ¬∑ clickbait ¬∑ thi√™n l·ªách ¬∑ ƒë·ªô tin c·∫≠y<br>Ch·ªâ c·∫ßn d√°n vƒÉn b·∫£n ho·∫∑c nh·∫≠p link b√†i b√°o ‚Äî k·∫øt qu·∫£ trong 3 gi√¢y.</p>
    <div class="hero-chips">
      <div class="chip"><span class="chip-dot cd-g"></span>Ph√¢n t√≠ch c·∫£m x√∫c NLP</div>
      <div class="chip"><span class="chip-dot cd-b"></span>Ph√°t hi·ªán clickbait</div>
      <div class="chip"><span class="chip-dot cd-y"></span>ƒêo thi√™n l·ªách th√¥ng tin</div>
      <div class="chip"><span class="chip-dot cd-p"></span>Ch·∫•m ƒëi·ªÉm 0‚Äì100%</div>
    </div>
    <div class="hero-stats">
      <div class="stat"><strong>4</strong><small>module AI ph√¢n t√≠ch</small></div>
      <div class="stat"><strong>10+</strong><small>ch·ªâ s·ªë ƒë∆∞·ª£c ki·ªÉm tra</small></div>
      <div class="stat"><strong>3s</strong><small>th·ªùi gian ph√¢n t√≠ch</small></div>
      <div class="stat"><strong>100%</strong><small>mi·ªÖn ph√≠</small></div>
    </div>
  </div>
</header>

<!-- ======= MAIN ======= -->
<main class="wrap">

  <!-- TABS -->
  <div class="tab-bar" role="tablist">
    <button class="tab-btn active" onclick="switchTab('text',this)" role="tab">
      üìù <span>Nh·∫≠p vƒÉn b·∫£n</span>
    </button>
    <button class="tab-btn" onclick="switchTab('url',this)" role="tab">
      üîó <span>Ph√¢n t√≠ch link</span>
    </button>
    <button class="tab-btn" onclick="switchTab('tech',this)" role="tab">
      ü§ñ <span>C√¥ng ngh·ªá AI</span>
    </button>
  </div>

  <!-- ======= PANEL: TEXT ======= -->
  <div id="panel-text" class="panel active">
    <div class="card">
      <div class="card-hd">
        <div>
          <h3>üìã Nh·∫≠p n·ªôi dung c·∫ßn ph√¢n t√≠ch</h3>
          <p>D√°n ti√™u ƒë·ªÅ, ƒëo·∫°n vƒÉn, b√†i ƒëƒÉng m·∫°ng x√£ h·ªôi ho·∫∑c b√†i b√°o</p>
        </div>
      </div>
      <div class="quick-row">
        <button class="qbtn r" onclick="fill('fake')">üö® Th·ª≠: Tin gi·∫£ ƒëi·ªÉn h√¨nh</button>
        <button class="qbtn y" onclick="fill('suspicious')">‚ö†Ô∏è Th·ª≠: Tin ƒë√°ng ng·ªù</button>
        <button class="qbtn g" onclick="fill('real')">‚úÖ Th·ª≠: Tin ƒë√°ng tin</button>
        <button class="qbtn" onclick="fill('clickbait')">üéØ Th·ª≠: Clickbait</button>
      </div>
      <textarea id="txt" style="margin-top:12px"
        placeholder="V√≠ d·ª•: 'KH·∫®N C·∫§P!!! U·ªëng n∆∞·ªõc chanh m·ªói s√°ng c√≥ th·ªÉ ch·ªØa kh·ªèi HO√ÄN TO√ÄN ung th∆∞ ‚Äì b√≠ m·∫≠t b·ªã ng√†nh d∆∞·ª£c gi·∫•u k√≠n 20 nƒÉm! Chia s·∫ª ngay tr∆∞·ªõc khi b√†i b·ªã x√≥a!'&#10;&#10;‚Üí Nh·∫•n n√∫t m·∫´u b√™n tr√™n ƒë·ªÉ th·ª≠ ngay, ho·∫∑c nh·∫•n Ctrl+Enter ƒë·ªÉ ph√¢n t√≠ch nhanh."></textarea>
      <div class="cnt-row">
        <div class="cnt-info"><b id="cnum">0</b> k√Ω t·ª± ¬∑ <b id="wnum">0</b> t·ª´</div>
        <button class="clr-btn" onclick="clearAll()">‚úï X√≥a</button>
      </div>
      <button class="btn-analyze" id="btn1" onclick="analyze()">
        <div class="shimmer" id="shim1"></div>
        <span id="bi1">üîç</span>
        <span id="bt1">Ph√¢n t√≠ch b·∫±ng AI</span>
        <div class="spin" id="sp1"></div>
      </button>
    </div>

    <!-- Progress Steps (shown during loading) -->
    <div class="card" id="loadCard" style="display:none">
      <div class="card-hd"><div><h3>‚öôÔ∏è ƒêang x·ª≠ l√Ω‚Ä¶</h3><p>C√°c module AI ƒëang ph√¢n t√≠ch n·ªôi dung</p></div></div>
      <div class="progress-steps" id="psteps">
        <div class="pstep" id="ps1">
          <div class="pstep-ic">1</div>
          <span style="flex:1;font-size:.85rem">Ti·ªÅn x·ª≠ l√Ω vƒÉn b·∫£n & t√°ch t·ª´</span>
          <div class="pstep-bar"><div class="pstep-fill" id="pf1"></div></div>
        </div>
        <div class="pstep" id="ps2">
          <div class="pstep-ic">2</div>
          <span style="flex:1;font-size:.85rem">Ph√¢n t√≠ch c·∫£m x√∫c (Sentiment NLP)</span>
          <div class="pstep-bar"><div class="pstep-fill" id="pf2"></div></div>
        </div>
        <div class="pstep" id="ps3">
          <div class="pstep-ic">3</div>
          <span style="flex:1;font-size:.85rem">Ph√°t hi·ªán clickbait & t·ª´ ng·ªØ gi·∫≠t g√¢n</span>
          <div class="pstep-bar"><div class="pstep-fill" id="pf3"></div></div>
        </div>
        <div class="pstep" id="ps4">
          <div class="pstep-ic">4</div>
          <span style="flex:1;font-size:.85rem">ƒê√°nh gi√° thi√™n l·ªách & t·ªïng h·ª£p ƒëi·ªÉm</span>
          <div class="pstep-bar"><div class="pstep-fill" id="pf4"></div></div>
        </div>
      </div>
    </div>

    <!-- RESULT -->
    <div id="result"></div>
  </div>

  <!-- ======= PANEL: URL ======= -->
  <div id="panel-url" class="panel">
    <div class="card">
      <div class="card-hd">
        <div>
          <h3>üîó Ph√¢n t√≠ch b√†i b√°o t·ª´ URL</h3>
          <p>Nh·∫≠p link b√†i b√°o ‚Äî AI s·∫Ω m√¥ ph·ªèng ph√¢n t√≠ch (prototype)</p>
        </div>
      </div>
      <div class="url-row">
        <input class="url-input" id="urlInp" type="url"
          placeholder="https://vnexpress.net/bai-viet-can-kiem-chung.html"/>
        <button class="url-fetch-btn" onclick="analyzeUrl()">üîç Ph√¢n t√≠ch</button>
      </div>
      <div class="url-note">
        ‚ö†Ô∏è <span><b>L∆∞u √Ω prototype:</b> V√¨ gi·ªõi h·∫°n CORS tr√™n GitHub Pages, h·ªá th·ªëng kh√¥ng th·ªÉ crawl n·ªôi dung th·ª±c. TruthGuard AI s·∫Ω <b>m√¥ ph·ªèng ph√¢n t√≠ch</b> d·ª±a tr√™n c·∫•u tr√∫c URL v√† domain. Trong phi√™n b·∫£n th·ª±c t·∫ø, s·∫Ω t√≠ch h·ª£p API crawl + OpenAI/Gemini ƒë·ªÉ ph√¢n t√≠ch to√†n b·ªô n·ªôi dung.</span>
      </div>
      <div class="quick-row" style="margin-top:12px">
        <span style="font-size:.75rem;color:var(--s5);align-self:center">Th·ª≠ nhanh:</span>
        <button class="qbtn" onclick="fillUrl('https://vnexpress.net/tin-tuc-chinh-sach-moi-nhat.html')">üóûÔ∏è VnExpress</button>
        <button class="qbtn r" onclick="fillUrl('https://tintuc-giat-gan.blogspot.com/benh-ung-thu-chua-khoi-bang-chanh')">üö® Link ƒë√°ng ng·ªù</button>
        <button class="qbtn" onclick="fillUrl('https://tuoitre.vn/bao-cao-so-lieu-chinh-thuc.html')">üì∞ Tu·ªïi Tr·∫ª</button>
      </div>
      <button class="btn-analyze" id="btn2" onclick="analyzeUrl()" style="margin-top:18px">
        <div class="shimmer" id="shim2"></div>
        <span id="bi2">üîó</span>
        <span id="bt2">Ph√¢n t√≠ch URL</span>
        <div class="spin" id="sp2"></div>
      </button>
      <div id="result-url" style="margin-top:18px"></div>
    </div>
  </div>

  <!-- ======= PANEL: TECH ======= -->
  <div id="panel-tech" class="panel">
    <div class="card">
      <div class="card-hd">
        <div><h3>ü§ñ C√¥ng ngh·ªá AI ƒë∆∞·ª£c s·ª≠ d·ª•ng</h3><p>Ki·∫øn tr√∫c h·ªá th·ªëng & l·ªô tr√¨nh ph√°t tri·ªÉn</p></div>
      </div>
      <div class="url-note" style="margin-bottom:18px">
        ‚ÑπÔ∏è <span>Phi√™n b·∫£n hi·ªán t·∫°i l√† <b>Prototype thu·∫ßn JavaScript</b>, ch·∫°y ho√†n to√†n ph√≠a client (client-side). Kh√¥ng c·∫ßn backend, kh√¥ng c·∫ßn API key. M·ªçi ph√¢n t√≠ch ƒë∆∞·ª£c th·ª±c hi·ªán b·∫±ng thu·∫≠t to√°n rule-based + pattern matching.</span>
      </div>
      <div class="tech-grid">
        <div class="tech-card">
          <span class="tech-badge active">‚úÖ ƒêang d√πng</span>
          <h4>Keyword & Pattern Matching</h4>
          <p>Ph√°t hi·ªán t·ª´ ng·ªØ k√≠ch ƒë·ªông, gi·∫≠t g√¢n, kh·∫≥ng ƒë·ªãnh tuy·ªát ƒë·ªëi b·∫±ng t·ª´ ƒëi·ªÉn t·ª´ kho√° ƒëa t·∫ßng (h∆°n 80+ pattern).</p>
        </div>
        <div class="tech-card">
          <span class="tech-badge active">‚úÖ ƒêang d√πng</span>
          <h4>Rule-based Sentiment Analysis</h4>
          <p>Ph√¢n t√≠ch c·∫£m x√∫c d·ª±a tr√™n t·ª´ ƒëi·ªÉn c·∫£m x√∫c ti·∫øng Vi·ªát ‚Äì ph√¢n lo·∫°i t√≠ch c·ª±c / ti√™u c·ª±c / trung l·∫≠p.</p>
        </div>
        <div class="tech-card">
          <span class="tech-badge active">‚úÖ ƒêang d√πng</span>
          <h4>Clickbait Detection Engine</h4>
          <p>Nh·∫≠n di·ªán ti√™u ƒë·ªÅ gi·∫≠t g√¢n qua pattern: ch·ªØ HOA, d·∫•u ch·∫•m than, t·ª´ "b√≠ m·∫≠t", "SHOCKING", c√¢u h·ªèi g√¢y t√≤ m√≤.</p>
        </div>
        <div class="tech-card">
          <span class="tech-badge active">‚úÖ ƒêang d√πng</span>
          <h4>Source Credibility Scoring</h4>
          <p>Ki·ªÉm tra s·ª± xu·∫•t hi·ªán c·ªßa ngu·ªìn uy t√≠n (VnExpress, Tu·ªïi Tr·∫ª, B·ªô Y t·∫ø, WHO‚Ä¶) v√† t√≠nh ƒë·∫∑c th√π c·ªßa th√¥ng tin.</p>
        </div>
        <div class="tech-card">
          <span class="tech-badge future">üöÄ T∆∞∆°ng lai</span>
          <h4>OpenAI GPT-4 / Gemini API</h4>
          <p>T√≠ch h·ª£p LLM ƒë·ªÉ hi·ªÉu ng·ªØ nghƒ©a s√¢u, ph√¢n t√≠ch l·∫≠p lu·∫≠n, so s√°nh ch√©o v·ªõi c∆° s·ªü d·ªØ li·ªáu s·ª± ki·ªán.</p>
        </div>
        <div class="tech-card">
          <span class="tech-badge future">üöÄ T∆∞∆°ng lai</span>
          <h4>BERT Ti·∫øng Vi·ªát (PhoBERT)</h4>
          <p>M√¥ h√¨nh NLP ƒë∆∞·ª£c fine-tune cho ti·∫øng Vi·ªát, gi√∫p hi·ªÉu ng·ªØ c·∫£nh v√† ph√°t hi·ªán sai l·ªách tinh vi h∆°n.</p>
        </div>
        <div class="tech-card">
          <span class="tech-badge future">üöÄ T∆∞∆°ng lai</span>
          <h4>Fact-checking Database</h4>
          <p>So kh·ªõp t·ª± ƒë·ªông v·ªõi c∆° s·ªü d·ªØ li·ªáu fact-check c·ªßa Snopes, AFP, kiemchung.vn th√¥ng qua API.</p>
        </div>
        <div class="tech-card">
          <span class="tech-badge proto">üîß Prototype</span>
          <h4>URL Analysis Module</h4>
          <p>Ph√¢n t√≠ch c·∫•u tr√∫c domain, TLD, path URL ƒë·ªÉ ph√°t hi·ªán website tin t·ª©c gi·∫£ m·∫°o v√† t√™n mi·ªÅn ƒë√°ng ng·ªù.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ======= SIGNS ======= -->
  <section class="signs-section fade-up">
    <div class="sec-divider"><span>Ki·∫øn th·ª©c c·∫ßn bi·∫øt</span></div>
    <div class="sec-title-wrap">
      <h2 class="sec-title">üö® 8 D·∫•u hi·ªáu nh·∫≠n di·ªán tin gi·∫£</h2>
      <p class="sec-sub">Trang b·ªã k·ªπ nƒÉng t·ª± b·∫£o v·ªá tr√™n kh√¥ng gian m·∫°ng</p>
    </div>
    <div class="signs-grid" style="margin-top:20px">
      <div class="sign-card fade-up"><span class="sign-em">üéØ</span><h4>Ti√™u ƒë·ªÅ gi·∫≠t g√¢n c·ª±c ƒëoan</h4><p>D√πng CH·ªÆ HOA, !!! li√™n ti·∫øp, t·ª´ "SHOCKING", "KINH HO√ÄNG" ƒë·ªÉ ƒë√°nh v√†o c·∫£m x√∫c thay v√¨ cung c·∫•p th√¥ng tin.</p></div>
      <div class="sign-card fade-up"><span class="sign-em">üö´</span><h4>Thi·∫øu ngu·ªìn tr√≠ch d·∫´n</h4><p>Kh√¥ng c√≥ t√™n t√°c gi·∫£, kh√¥ng c√≥ link d·∫´n ngu·ªìn. Ch·ªâ ghi m∆° h·ªì "theo c√°c chuy√™n gia" hay "nghi√™n c·ª©u cho th·∫•y".</p></div>
      <div class="sign-card fade-up"><span class="sign-em">‚ö°</span><h4>K√™u g·ªçi chia s·∫ª kh·∫©n c·∫•p</h4><p>"Chia s·∫ª ngay tr∆∞·ªõc khi b·ªã x√≥a!" ‚Äì chi·∫øn thu·∫≠t t·∫°o t√¢m l√Ω ho·∫£ng lo·∫°n ƒë·ªÉ lan truy·ªÅn th√¥ng tin ch∆∞a ƒë∆∞·ª£c ki·ªÉm ch·ª©ng.</p></div>
      <div class="sign-card fade-up"><span class="sign-em">üíä</span><h4>Kh·∫≥ng ƒë·ªãnh y t·∫ø tuy·ªát ƒë·ªëi</h4><p>"Ch·ªØa kh·ªèi 100%", "ƒë·∫∑c tr·ªã ho√†n to√†n" m√† kh√¥ng c√≥ th·ª≠ nghi·ªám l√¢m s√†ng hay c√¥ng b·ªë khoa h·ªçc uy t√≠n.</p></div>
      <div class="sign-card fade-up"><span class="sign-em">üåê</span><h4>Website gi·∫£ m·∫°o uy t√≠n</h4><p>T√™n mi·ªÅn ƒë√°nh l·ª´a: "vnexpress-news.net", "tuoitre24h.info" ‚Äì tr√¥ng gi·ªëng b√°o th·∫≠t nh∆∞ng kh√¥ng ph·∫£i.</p></div>
      <div class="sign-card fade-up"><span class="sign-em">üò°</span><h4>Khai th√°c c·∫£m x√∫c m·∫°nh</h4><p>C·ªë t√¨nh g√¢y s·ª£ h√£i, ph·∫´n n·ªô, ho·∫∑c hy v·ªçng c·ª±c ƒëoan thay v√¨ cung c·∫•p d·ªØ li·ªáu v√† ph√¢n t√≠ch kh√°ch quan.</p></div>
      <div class="sign-card fade-up"><span class="sign-em">üìÖ</span><h4>Tin c≈© t√°i s·ª≠ d·ª•ng</h4><p>Tin t·ª´ 5‚Äì10 nƒÉm tr∆∞·ªõc ƒë∆∞·ª£c c·∫Øt gh√©p l·∫°i v·ªõi ng√†y m·ªõi ƒë·ªÉ t·∫°o c·∫£m gi√°c ƒë√¢y l√† s·ª± ki·ªán ƒëang x·∫£y ra.</p></div>
      <div class="sign-card fade-up"><span class="sign-em">üïµÔ∏è</span><h4>Thuy·∫øt √¢m m∆∞u</h4><p>"Ch√≠nh ph·ªß kh√¥ng mu·ªën b·∫°n bi·∫øt", "b·ªã gi·∫•u k√≠n su·ªët 20 nƒÉm" ‚Äì d·∫•u hi·ªáu ƒëi·ªÉn h√¨nh c·ªßa n·ªôi dung ch·ªëng l·∫°i th·ªÉ ch·∫ø.</p></div>
    </div>
  </section>

</main>

<!-- ======= FOOTER ======= -->
<footer>
  <div class="f-logo">üõ°Ô∏è TruthGuard AI</div>
  H·ªá th·ªëng ph√°t hi·ªán tin gi·∫£ ¬∑ D·ª± √°n AI h·ªçc sinh ¬∑ Phi√™n b·∫£n Prototype v3.0 ¬∑ 2025<br>
  <span style="font-size:.72rem;opacity:.5">‚ö†Ô∏è K·∫øt qu·∫£ mang t√≠nh minh ho·∫°. Phi√™n b·∫£n th·ª±c t·∫ø s·∫Ω t√≠ch h·ª£p OpenAI / Gemini API.</span>
  <div class="f-chips">
    <span class="f-chip">HTML ¬∑ CSS ¬∑ JS</span>
    <span class="f-chip">GitHub Pages Ready</span>
    <span class="f-chip">No Backend</span>
    <span class="f-chip">Open Source</span>
    <span class="f-chip">Expandable to AI API</span>
  </div>
</footer>

<script>
/* ================================================
   SAMPLE DATA
================================================ */
const SAMPLES = {
  fake:`KH·∫®N C·∫§P!!! U·ªëng n∆∞·ªõc chanh pha mu·ªëi bi·ªÉn m·ªói s√°ng C√ì TH·ªÇ CH·ªÆA KH·ªéI HO√ÄN TO√ÄN ung th∆∞ ‚Äì b√≠ m·∫≠t b·ªã ng√†nh d∆∞·ª£c ph·∫©m th·∫ø gi·ªõi gi·∫•u k√≠n su·ªët 20 nƒÉm! H√†ng tri·ªáu ng∆∞·ªùi ƒë√£ kh·ªèi b·ªánh nh∆∞ng ch√≠nh ph·ªß KH√îNG MU·ªêN b·∫°n bi·∫øt ƒëi·ªÅu n√†y. CHIA S·∫∫ NGAY tr∆∞·ªõc khi b√†i vi·∫øt b·ªã X√ìA!`,
  suspicious:`Theo m·ªôt s·ªë chuy√™n gia dinh d∆∞·ª°ng, u·ªëng tr√† xanh h·∫±ng ng√†y c√≥ th·ªÉ gi√∫p gi·∫£m ƒë√°ng k·ªÉ nguy c∆° m·∫Øc c√°c b·ªánh m√£n t√≠nh. M·ªôt nghi√™n c·ª©u g·∫ßn ƒë√¢y cho th·∫•y nh·ªØng ng∆∞·ªùi u·ªëng 3-4 t√°ch tr√† xanh m·ªói ng√†y c√≥ s·ª©c kh·ªèe t·ªët h∆°n. Tuy nhi√™n k·∫øt qu·∫£ c√≥ th·ªÉ thay ƒë·ªïi t√πy t·ª´ng ng∆∞·ªùi v√† ch·∫ø ƒë·ªô ƒÉn u·ªëng.`,
  real:`Theo VnExpress ng√†y 15/10/2024, B·ªô Y t·∫ø Vi·ªát Nam v·ª´a c√¥ng b·ªë b√°o c√°o cho th·∫•y t·ª∑ l·ªá ti√™m vaccine COVID-19 to√†n qu·ªëc ƒë·∫°t 95,3% d√¢n s·ªë tr∆∞·ªüng th√†nh. Th·ª© tr∆∞·ªüng Nguy·ªÖn Th·ªã Li√™n H∆∞∆°ng cho bi·∫øt ƒë√¢y l√† k·∫øt qu·∫£ c·ªßa chi·∫øn d·ªãch ti√™m ch·ªßng k√©o d√†i 3 nƒÉm v·ªõi s·ª± ph·ªëi h·ª£p c·ªßa T·ªï ch·ª©c Y t·∫ø Th·∫ø gi·ªõi (WHO) v√† UNICEF. Chi·∫øn d·ªãch ƒë√£ s·ª≠ d·ª•ng c√°c vaccine ƒë∆∞·ª£c WHO ph√™ duy·ªát.`,
  clickbait:`B·∫†N S·∫º KH√îNG TIN ƒë∆∞·ª£c ƒëi·ªÅu g√¨ ƒëang x·∫£y ra v·ªõi ng∆∞·ªùi ƒÉn T·ªéI M·ªñI NG√ÄY!!! C√°c b√°c sƒ© CHO√ÅNG V√ÅNG khi xem k·∫øt qu·∫£. B√≠ m·∫≠t s·ªë 5 s·∫Ω khi·∫øn b·∫°n THAY ƒê·ªîI HO√ÄN TO√ÄN cu·ªôc s·ªëng! ƒê·ª´ng b·ªè l·ª° ‚Äì ƒë·ªçc ngay tr∆∞·ªõc khi qu√° mu·ªôn!!!`
};

/* ================================================
   KEYWORD BANKS
================================================ */
// T·ª´ kho√° tin gi·∫£ m·∫°nh
const FAKE_KW = [
  'b√≠ m·∫≠t','gi·∫•u k√≠n','ti·∫øt l·ªô s·ªëc','ch·∫•n ƒë·ªông','kinh ho√†ng','chia s·∫ª ngay',
  'tr∆∞·ªõc khi b·ªã x√≥a','x√≥a b√†i','ch·ªØa kh·ªèi','th·∫ßn k·ª≥','ch√≠nh ph·ªß kh√¥ng mu·ªën',
  'b·ªã che gi·∫•u','kh√¥ng ai bi·∫øt','ng√†nh d∆∞·ª£c gi·∫•u','ƒë·∫∑c tr·ªã','ch·ªØa kh·ªèi 100%',
  'shocking','lan truy·ªÅn g·∫•p','kh·∫©n c·∫•p','c·∫£nh b√°o kh·∫©n'
];
// T·ª´ kho√° clickbait
const CLICK_KW = [
  'b·∫°n s·∫Ω kh√¥ng tin','kh√¥ng th·ªÉ tin','cho√°ng v√°ng','s·ª≠ng s·ªët','b·∫•t ng·ªù',
  's·ªë 1 s·∫Ω','b√≠ m·∫≠t s·ªë','ƒë·ª´ng b·ªè l·ª°','ƒë·ªçc ngay','qu√° mu·ªôn','thay ƒë·ªïi cu·ªôc s·ªëng',
  'b√°c sƒ© s·ªëc','ai c≈©ng ph·∫£i','l√†m b·∫°n s·ªëc','b√≠ quy·∫øt v√†ng'
];
// T·ª´ kho√° c·∫£m x√∫c √¢m
const NEG_KW = [
  'nguy hi·ªÉm','ch·∫øt','t·ª≠ vong','th·∫£m h·ªça','kinh kh·ªßng','t·ªìi t·ªá',
  'ƒëau ƒë·ªõn','kh√≥c','t·ª©c gi·∫≠n','ph·∫´n n·ªô','cƒÉm th√π','lo s·ª£','ho·∫£ng lo·∫°n','ƒëe d·ªça','ung th∆∞'
];
// T·ª´ kho√° c·∫£m x√∫c d∆∞∆°ng
const POS_KW = [
  'tuy·ªát v·ªùi','t·ªët','hi·ªáu qu·∫£','th√†nh c√¥ng','ph√°t tri·ªÉn','t√≠ch c·ª±c',
  'tƒÉng tr∆∞·ªüng','c·∫£i thi·ªán','hy v·ªçng','h·∫°nh ph√∫c','k·ª≥ di·ªáu','xu·∫•t s·∫Øc'
];
// T·ª´ kho√° ngu·ªìn uy t√≠n
const TRUST_KW = [
  'vnexpress','tu·ªïi tr·∫ª','thanh ni√™n','nh√¢n d√¢n','b·ªô y t·∫ø','moh.gov',
  'who.int','unicef','theo b√°o c√°o','c√¥ng b·ªë ch√≠nh th·ª©c','nghi√™n c·ª©u l√¢m s√†ng',
  'ƒë·∫°i h·ªçc y','th·ª© tr∆∞·ªüng','b·ªô tr∆∞·ªüng','th·ªß t∆∞·ªõng','ch√≠nh ph·ªß.vn','t·ªï ch·ª©c y t·∫ø'
];
// T·ª´ kho√° thi√™n l·ªách
const BIAS_KW = [
  't·∫•t c·∫£','lu√¥n lu√¥n','kh√¥ng bao gi·ªù','ch·∫Øc ch·∫Øn','ho√†n to√†n',
  'm·ªçi ng∆∞·ªùi','duy nh·∫•t','tuy·ªát ƒë·ªëi','kh√¥ng th·ªÉ ph·ªß nh·∫≠n','hi·ªÉn nhi√™n'
];
// T·ª´ kho√° m∆° h·ªì (suspicious)
const VAGUE_KW = ['m·ªôt s·ªë chuy√™n gia','nghi√™n c·ª©u cho th·∫•y','c√≥ th·ªÉ','ƒë∆∞·ª£c cho l√†','nghi ng·ªù','c√≥ kh·∫£ nƒÉng'];

/* ================================================
   ANALYSIS ENGINE
================================================ */
function analyzeText(text) {
  const t  = text.toLowerCase();
  const wc = text.trim().split(/\s+/).length;

  // --- Scores (counts) ---
  const fakeScore  = FAKE_KW.filter(k => t.includes(k)).length;
  const clickScore = CLICK_KW.filter(k => t.includes(k)).length;
  const negScore   = NEG_KW.filter(k => t.includes(k)).length;
  const posScore   = POS_KW.filter(k => t.includes(k)).length;
  const trustScore = TRUST_KW.filter(k => t.includes(k)).length;
  const biasScore  = BIAS_KW.filter(k => t.includes(k)).length;
  const vagueScore = VAGUE_KW.filter(k => t.includes(k)).length;

  // Caps: ch·ªØ hoa li√™n ti·∫øp (‚â•3 k√Ω t·ª± hoa li·ªÅn nhau)
  const capsMatches = (text.match(/[A-Z√Ä√Å·∫†·∫¢√É√Ç·∫§·∫¶·∫®·∫™·∫¨ƒÇ·∫Æ·∫∞·∫≤·∫¥·∫∂ƒê√à√â·∫∏·∫∫·∫º√ä·∫æ·ªÄ·ªÜ·ªÇ·ªÑ√å√ç·ªä·ªàƒ®√í√ì·ªå·ªé√ï√î·ªê·ªí·ªî·ªñ·ªò∆†·ªö·ªú·ªû·ª†·ª¢√ô√ö·ª§·ª¶≈®∆Ø·ª®·ª™·ª¨·ªÆ·ª∞·ª≤√ù·ª¥·ª∂·ª∏]{3,}/g)||[]).length;
  // D·∫•u ch·∫•m than li√™n ti·∫øp
  const exclamCount = (text.match(/!{2,}/g)||[]).length;

  // --- Trust score (0‚Äì100) ---
  let trust = 60;
  trust -= fakeScore  * 12;
  trust -= clickScore * 8;
  trust -= capsMatches* 5;
  trust -= exclamCount* 6;
  trust -= biasScore  * 4;
  trust += trustScore * 10;
  trust += (posScore > negScore ? 5 : 0);
  trust  = Math.max(5, Math.min(95, trust));

  // --- Clickbait score (0‚Äì100) ---
  let cb = 0;
  cb += clickScore  * 15;
  cb += capsMatches * 10;
  cb += exclamCount * 12;
  cb += fakeScore   * 8;
  cb  = Math.min(95, cb);

  // --- Bias score (0‚Äì100) ---
  let bias = 20;
  bias += biasScore  * 10;
  bias += vagueScore * 8;
  bias += (negScore > 3 ? 15 : 0);
  bias  = Math.min(90, bias);

  // --- Emotion ---
  let emotion, emotionColor;
  if (negScore > posScore + 1)       { emotion='Ti√™u c·ª±c';  emotionColor='neg' }
  else if (posScore > negScore + 1)  { emotion='T√≠ch c·ª±c';  emotionColor='pos' }
  else                               { emotion='Trung l·∫≠p'; emotionColor='neu' }

  // --- Level ---
  let level;
  if (trust >= 65)       level = 'safe';
  else if (trust >= 35)  level = 'warn';
  else                   level = 'danger';

  // --- Collected keywords ---
  const foundFake  = FAKE_KW.filter(k => t.includes(k));
  const foundClick = CLICK_KW.filter(k => t.includes(k));
  const foundTrust = TRUST_KW.filter(k => t.includes(k));

  // --- Signals ---
  const signals = [];
  if (foundFake.length)
    signals.push({c:'r', t:`Ph√°t hi·ªán ${foundFake.length} t·ª´/c·ª•m t·ª´ tin gi·∫£ ƒëi·ªÉn h√¨nh: "${foundFake.slice(0,3).join('", "')}"`});
  if (capsMatches >= 2)
    signals.push({c:'r', t:`C√≥ ${capsMatches} c·ª•m ch·ªØ HOA li√™n ti·∫øp ‚Äì d·∫•u hi·ªáu ti√™u ƒë·ªÅ gi·∫≠t g√¢n.`});
  if (exclamCount)
    signals.push({c:'r', t:`S·ª≠ d·ª•ng d·∫•u ch·∫•m than li√™n ti·∫øp (!!! ho·∫∑c h∆°n) ${exclamCount} l·∫ßn.`});
  if (foundClick.length)
    signals.push({c:'y', t:`Ph√°t hi·ªán ${foundClick.length} m·∫´u clickbait: "${foundClick.slice(0,2).join('", "')}"`});
  if (biasScore > 2)
    signals.push({c:'y', t:`C√≥ ${biasScore} t·ª´ kh·∫≥ng ƒë·ªãnh tuy·ªát ƒë·ªëi (t·∫•t c·∫£, lu√¥n lu√¥n, ch·∫Øc ch·∫Øn‚Ä¶) ‚Äì d·∫•u hi·ªáu thi√™n l·ªách.`});
  if (vagueScore)
    signals.push({c:'y', t:`Tr√≠ch d·∫´n m∆° h·ªì kh√¥ng c·ª• th·ªÉ: "theo chuy√™n gia", "nghi√™n c·ª©u cho th·∫•y" (${vagueScore} l·∫ßn).`});
  if (foundTrust.length)
    signals.push({c:'g', t:`Ph√°t hi·ªán ngu·ªìn uy t√≠n: ${foundTrust.slice(0,3).join(', ')}.`});
  if (trust > 65)
    signals.push({c:'g', t:`Ng√¥n ng·ªØ t∆∞∆°ng ƒë·ªëi trung l·∫≠p, kh√¥ng k√™u g·ªçi chia s·∫ª kh·∫©n c·∫•p.`});
  if (wc > 80)
    signals.push({c:'b', t:`B√†i vi·∫øt c√≥ ${wc} t·ª´ ‚Äì n·ªôi dung ƒë·ªß d√†i ƒë·ªÉ ph√¢n t√≠ch; tin gi·∫£ th∆∞·ªùng ng·∫Øn v√† kh√¥ng c√≥ l·∫≠p lu·∫≠n.`});
  if (negScore > 4)
    signals.push({c:'y', t:`M·∫≠t ƒë·ªô t·ª´ ng·ªØ ti√™u c·ª±c cao (${negScore} t·ª´) ‚Äì c√≥ th·ªÉ khai th√°c c·∫£m x√∫c s·ª£ h√£i.`});

  if (!signals.length)
    signals.push({c:'b', t:'Kh√¥ng ph√°t hi·ªán d·∫•u hi·ªáu b·∫•t th∆∞·ªùng r√µ r√†ng. H√£y ki·ªÉm ch·ª©ng th√™m t·ª´ ngu·ªìn g·ªëc.'});

  // --- Suggestions ---
  const suggests = [];
  if (level === 'danger') {
    suggests.push('Tuy·ªát ƒë·ªëi kh√¥ng chia s·∫ª n·ªôi dung n√†y tr∆∞·ªõc khi c√≥ x√°c nh·∫≠n t·ª´ √≠t nh·∫•t 2 ngu·ªìn b√°o uy t√≠n.');
    suggests.push('T√¨m ki·∫øm ch·ªß ƒë·ªÅ n√†y tr√™n Google Scholar / PubMed n·∫øu li√™n quan ƒë·∫øn y t·∫ø, khoa h·ªçc.');
    suggests.push('D√πng Ki·ªÉm Ch·ª©ng (kiemchung.vn) ho·∫∑c Snopes.com ƒë·ªÉ xem tin ƒë√£ b·ªã b√°c b·ªè ch∆∞a.');
    suggests.push('X√°c minh ngu·ªìn g·ªëc trang web: ki·ªÉm tra t√™n mi·ªÅn, ng√†y th√†nh l·∫≠p, th√¥ng tin li√™n h·ªá.');
  } else if (level === 'warn') {
    suggests.push('ƒê·ªçc th√™m t·ª´ 2‚Äì3 b√°o l·ªõn (VnExpress, Tu·ªïi Tr·∫ª, Nh√¢n D√¢n) ƒë·ªÉ ƒë·ªëi chi·∫øu th√¥ng tin.');
    suggests.push('T√¨m ki·∫øm t√™n t√°c gi·∫£ v√† t·ªï ch·ª©c ph√°t h√†nh ‚Äì ngu·ªìn tin uy t√≠n lu√¥n c√≥ th√¥ng tin r√µ r√†ng.');
    suggests.push('Ki·ªÉm tra ng√†y ƒëƒÉng b√†i ‚Äì m·ªôt s·ªë tin c≈© ƒë∆∞·ª£c chia s·∫ª l·∫°i nh∆∞ tin m·ªõi.');
    suggests.push('Ch√∫ √Ω ƒëi·ªÅu ki·ªán √°p d·ª•ng ‚Äì th√¥ng tin y t·∫ø/khoa h·ªçc th∆∞·ªùng c√≥ gi·ªõi h·∫°n ƒë·ªëi t∆∞·ª£ng.');
  } else {
    suggests.push('N·ªôi dung c√≥ v·∫ª ƒë√°ng tin, nh∆∞ng h√£y truy c·∫≠p tr·ª±c ti·∫øp ngu·ªìn g·ªëc ƒë·ªÉ ƒë·ªçc b√†i ƒë·∫ßy ƒë·ªß.');
    suggests.push('Chia s·∫ª k√®m link ngu·ªìn g·ªëc ƒë·ªÉ ng∆∞·ªùi nh·∫≠n c√≥ th·ªÉ t·ª± ki·ªÉm ch·ª©ng th√™m.');
    suggests.push('Theo d√µi c·∫≠p nh·∫≠t t·ª´ t·ªï ch·ª©c li√™n quan n·∫øu ƒë√¢y l√† th√¥ng tin ch√≠nh s√°ch hay y t·∫ø.');
  }

  return {level, trust:Math.round(trust), clickbait:Math.round(cb),
          bias:Math.round(bias), emotion, emotionColor,
          foundFake, foundClick, foundTrust,
          signals, suggests, wc};
}

/* ================================================
   BUILD RESULT HTML
================================================ */
const VERDICT_DATA = {
  safe:  {icon:'‚úÖ', title:'ƒê√°ng Tin C·∫≠y',                sub:'N·ªôi dung c√≥ nhi·ªÅu d·∫•u hi·ªáu c·ªßa th√¥ng tin ch·∫•t l∆∞·ª£ng. V·∫´n n√™n ki·ªÉm ch·ª©ng t·ª´ ngu·ªìn g·ªëc.'},
  warn:  {icon:'‚ö†Ô∏è', title:'C·∫ßn Ki·ªÉm Ch·ª©ng Th√™m',        sub:'M·ªôt s·ªë ƒëi·ªÉm ƒë√°ng ng·ªù ƒë∆∞·ª£c ph√°t hi·ªán. ƒê·ª´ng chia s·∫ª cho ƒë·∫øn khi x√°c nh·∫≠n t·ª´ ngu·ªìn uy t√≠n.'},
  danger:{icon:'‚ùå', title:'C√≥ D·∫•u Hi·ªáu Sai L·ªách Nghi√™m Tr·ªçng', sub:'Nhi·ªÅu ƒë·∫∑c ƒëi·ªÉm c·ªßa tin gi·∫£ ƒë∆∞·ª£c ph√°t hi·ªán. Kh√¥ng n√™n tin ho·∫∑c chia s·∫ª n·ªôi dung n√†y.'}
};
const EMO_COLOR = {pos:'#16a34a', neg:'#dc2626', neu:'#3b82f6'};

function buildResult(r, inputText) {
  const v = VERDICT_DATA[r.level];
  // Ring offset: circumference = 2œÄ√ó39 ‚âà 245
  const offset = Math.round(245 - 245 * r.trust / 100);

  const trustColor = r.trust >= 65 ? 'g' : r.trust >= 35 ? 'y' : 'r';
  const cbColor    = r.clickbait <= 30 ? 'g' : r.clickbait <= 60 ? 'y' : 'r';
  const biasColor  = r.bias <= 30 ? 'g' : r.bias <= 55 ? 'y' : 'r';

  const sigHTML = r.signals.map(s =>
    `<div class="sig ${s.c} ai"><span class="sig-dot"></span>${s.t}</div>`
  ).join('');

  const sugHTML = r.suggests.map((s,i) =>
    `<div class="sug ai ai${i+2}"><span class="sug-n">${i+1}</span>${s}</div>`
  ).join('');

  // Keywords chips
  const kwHTML = [
    ...r.foundFake.slice(0,4).map(k => `<span class="kw r">üö® ${k}</span>`),
    ...r.foundClick.slice(0,3).map(k => `<span class="kw y">üéØ ${k}</span>`),
    ...r.foundTrust.slice(0,3).map(k => `<span class="kw g">‚úÖ ${k}</span>`)
  ].join('') || '<span class="kw b">Kh√¥ng ph√°t hi·ªán t·ª´ kho√° n·ªïi b·∫≠t</span>';

  // Emotion pills
  const emos = ['T√≠ch c·ª±c','Trung l·∫≠p','Ti√™u c·ª±c'];
  const emoMap = {'T√≠ch c·ª±c':{dot:'#16a34a',cls:'active-pos'},'Ti√™u c·ª±c':{dot:'#dc2626',cls:'active-neg'},'Trung l·∫≠p':{dot:'#3b82f6',cls:'active-neu'}};
  const emoHTML = emos.map(e => {
    const isActive = e === r.emotion;
    const cls = isActive ? emoMap[e].cls : 'inactive';
    const dot = isActive ? emoMap[e].dot : '#94a3b8';
    return `<div class="emo-pill ${cls}"><span class="emo-dot" style="background:${dot}"></span>${e}${isActive?' ‚úì':''}</div>`;
  }).join('');

  return `
  <!-- Verdict -->
  <div class="verdict ${r.level} ai">
    <div class="v-icon">${v.icon}</div>
    <div class="v-info">
      <div class="v-title">${v.title}</div>
      <div class="v-sub">${v.sub}</div>
    </div>
    <div class="score-ring">
      <svg viewBox="0 0 90 90" width="90" height="90">
        <circle class="ring-bg" cx="45" cy="45" r="39"/>
        <circle class="ring-fill" id="rf" cx="45" cy="45" r="39" style="stroke-dashoffset:${offset}"/>
      </svg>
      <div class="ring-center">
        <div class="ring-num">${r.trust}%</div>
        <div class="ring-unit">tin c·∫≠y</div>
      </div>
    </div>
  </div>

  <!-- Metrics -->
  <div class="metrics ai ai2">
    <div class="metric">
      <div class="metric-hd"><div class="metric-ic">üìä</div><div class="metric-label">ƒê·ªô tin c·∫≠y</div></div>
      <div class="metric-val" style="color:${trustColor==='g'?'var(--g)':trustColor==='y'?'var(--y)':'var(--r)'}">${r.trust}%</div>
      <div class="mbar"><div class="mfill ${trustColor}" style="width:${r.trust}%"></div></div>
    </div>
    <div class="metric">
      <div class="metric-hd"><div class="metric-ic">üéØ</div><div class="metric-label">M·ª©c ƒë·ªô Clickbait</div></div>
      <div class="metric-val" style="color:${cbColor==='g'?'var(--g)':cbColor==='y'?'var(--y)':'var(--r)'}">${r.clickbait}%</div>
      <div class="mbar"><div class="mfill ${cbColor}" style="width:${r.clickbait}%"></div></div>
    </div>
    <div class="metric">
      <div class="metric-hd"><div class="metric-ic">‚öñÔ∏è</div><div class="metric-label">M·ª©c ƒë·ªô thi√™n l·ªách</div></div>
      <div class="metric-val" style="color:${biasColor==='g'?'var(--g)':biasColor==='y'?'var(--y)':'var(--r)'}">${r.bias}%</div>
      <div class="mbar"><div class="mfill ${biasColor}" style="width:${r.bias}%"></div></div>
    </div>
    <div class="metric">
      <div class="metric-hd"><div class="metric-ic">üìù</div><div class="metric-label">ƒê·ªô d√†i vƒÉn b·∫£n</div></div>
      <div class="metric-val" style="color:var(--c-600)">${r.wc} t·ª´</div>
      <div class="mbar"><div class="mfill b" style="width:${Math.min(100,r.wc/2)}%"></div></div>
    </div>
  </div>

  <!-- Detail cards -->
  <div class="detail-grid">
    <div class="dc ai ai2">
      <div class="dc-hd"><span class="ic2">üî¨</span>Ph√¢n t√≠ch chi ti·∫øt</div>
      ${sigHTML}
    </div>
    <div class="dc ai ai3">
      <div class="dc-hd"><span class="ic2">üß≠</span>G·ª£i √Ω ki·ªÉm ch·ª©ng</div>
      ${sugHTML}
    </div>
    <div class="dc ai ai3">
      <div class="dc-hd"><span class="ic2">üí¨</span>Ph√¢n t√≠ch c·∫£m x√∫c (Sentiment)</div>
      <div class="emo-row">${emoHTML}</div>
      <p style="font-size:.8rem;color:var(--s5);margin-top:12px">Ng√¥n ng·ªØ mang s·∫Øc th√°i <b>${r.emotion.toLowerCase()}</b> l√† ch·ªß ƒë·∫°o. ${r.emotionColor==='neg'?'C·∫£m x√∫c ti√™u c·ª±c cao c√≥ th·ªÉ ƒë∆∞·ª£c d√πng ƒë·ªÉ thao t√∫ng ph·∫£n ·ª©ng c·ªßa ng∆∞·ªùi ƒë·ªçc.':r.emotionColor==='pos'?'C·∫£m x√∫c t√≠ch c·ª±c ‚Äì nh∆∞ng c·∫ßn ki·ªÉm tra xem c√≥ ph√≥ng ƒë·∫°i qu√° m·ª©c kh√¥ng.':'Ng√¥n ng·ªØ t∆∞∆°ng ƒë·ªëi trung l·∫≠p, √≠t khai th√°c c·∫£m x√∫c.'}</p>
    </div>
    <div class="dc ai ai4">
      <div class="dc-hd"><span class="ic2">üè∑Ô∏è</span>T·ª´ kho√° ƒë∆∞·ª£c ph√°t hi·ªán</div>
      <div class="kw-list">${kwHTML}</div>
    </div>
  </div>`;
}

/* ================================================
   ANIMATE PROGRESS STEPS
================================================ */
function runSteps(cb) {
  const steps = [
    {ps:'ps1',pf:'pf1',delay:0, dur:500},
    {ps:'ps2',pf:'pf2',delay:550, dur:600},
    {ps:'ps3',pf:'pf3',delay:1200,dur:550},
    {ps:'ps4',pf:'pf4',delay:1800,dur:600},
  ];
  steps.forEach(({ps,pf,delay,dur}) => {
    setTimeout(() => {
      document.getElementById(ps).classList.add('active');
      document.getElementById(pf).style.width = '100%';
      document.getElementById(pf).style.transition = `width ${dur}ms ease`;
    }, delay);
    setTimeout(() => {
      document.getElementById(ps).classList.remove('active');
      document.getElementById(ps).classList.add('done');
      document.getElementById(ps).querySelector('.pstep-ic').textContent = '‚úì';
    }, delay + dur + 80);
  });
  setTimeout(cb, steps[steps.length-1].delay + steps[steps.length-1].dur + 250);
}

/* ================================================
   ANALYZE (TEXT)
================================================ */
function analyze() {
  const txt = document.getElementById('txt').value.trim();
  if (!txt) {
    const el = document.getElementById('txt');
    el.style.borderColor = 'var(--r)';
    el.focus();
    setTimeout(() => el.style.borderColor = '', 1400);
    return;
  }

  // Button loading
  setLoading('btn1','bi1','bt1','sp1','shim1',true,'üîç','Ph√¢n t√≠ch b·∫±ng AI');

  // Show load card, reset steps
  const lc = document.getElementById('loadCard');
  lc.style.display = 'block';
  ['ps1','ps2','ps3','ps4'].forEach(id => {
    const el = document.getElementById(id);
    el.classList.remove('active','done');
    el.querySelector('.pstep-ic').textContent = el.id.replace('ps','');
  });
  ['pf1','pf2','pf3','pf4'].forEach(id => {
    document.getElementById(id).style.width = '0%';
  });
  document.getElementById('result').innerHTML = '';
  lc.scrollIntoView({behavior:'smooth',block:'start'});

  runSteps(() => {
    const res = analyzeText(txt);
    lc.style.display = 'none';
    const container = document.getElementById('result');
    container.innerHTML = buildResult(res, txt);
    // Trigger ring animation
    requestAnimationFrame(() => {
      const rf = document.getElementById('rf');
      if (rf) {
        const target = Math.round(245 - 245 * res.trust / 100);
        rf.style.transition = 'stroke-dashoffset 1.4s cubic-bezier(.34,1.56,.64,1)';
        rf.style.strokeDashoffset = target;
      }
    });
    setLoading('btn1','bi1','bt1','sp1','shim1',false,'‚úÖ','Ph√¢n t√≠ch l·∫°i');
    container.scrollIntoView({behavior:'smooth',block:'start'});
  });
}

/* ================================================
   ANALYZE (URL)
================================================ */
function analyzeUrl() {
  const url = document.getElementById('urlInp').value.trim();
  if (!url || !url.startsWith('http')) {
    const el = document.getElementById('urlInp');
    el.style.borderColor = 'var(--r)';
    el.focus();
    setTimeout(() => el.style.borderColor = '', 1400);
    return;
  }

  setLoading('btn2','bi2','bt2','sp2','shim2',true,'üîó','Ph√¢n t√≠ch URL');
  document.getElementById('result-url').innerHTML = '';

  // Parse domain
  let domain = '';
  try { domain = new URL(url).hostname.toLowerCase(); } catch(e) { domain = url; }

  const trusted = ['vnexpress.net','tuoitre.vn','thanhnien.vn','nhandan.vn','baochinhphu.vn','tienphong.vn','dantri.com.vn'];
  const suspicious_domains = ['blogspot','wordpress.com','wix.com','weebly'];
  const fake_tlds = ['.xyz','.info','.biz','.click','.link','.club'];

  let urlTrust = 55;
  if (trusted.some(d => domain.includes(d)))      urlTrust = 82 + Math.floor(Math.random()*10);
  else if (suspicious_domains.some(d=>domain.includes(d))) urlTrust = 20 + Math.floor(Math.random()*15);
  else if (fake_tlds.some(t=>domain.endsWith(t))) urlTrust = 15 + Math.floor(Math.random()*12);
  else urlTrust = 40 + Math.floor(Math.random()*25);

  const level = urlTrust >= 65 ? 'safe' : urlTrust >= 35 ? 'warn' : 'danger';
  const v = VERDICT_DATA[level];

  setTimeout(() => {
    const offset = Math.round(245 - 245 * urlTrust / 100);
    const trustColor = urlTrust >= 65 ? 'g' : urlTrust >= 35 ? 'y' : 'r';
    const html = `
    <div class="verdict ${level} ai">
      <div class="v-icon">${v.icon}</div>
      <div class="v-info">
        <div class="v-title">${v.title}</div>
        <div class="v-sub"><b>${domain}</b> ‚Äì ${urlTrust >= 65 ? 'Domain b√°o ch√≠nh th·ªëng uy t√≠n ƒë∆∞·ª£c nh·∫≠n di·ªán.' : urlTrust >= 35 ? 'Domain kh√¥ng n·∫±m trong danh s√°ch uy t√≠n. C·∫ßn ki·ªÉm tra th√™m.' : 'Domain c√≥ d·∫•u hi·ªáu ƒë√°ng ng·ªù ho·∫∑c kh√¥ng ph·∫£i b√°o ch√≠nh th·ªëng.'}</div>
      </div>
      <div class="score-ring">
        <svg viewBox="0 0 90 90" width="90" height="90">
          <circle class="ring-bg" cx="45" cy="45" r="39"/>
          <circle class="ring-fill" id="rf2" cx="45" cy="45" r="39" style="stroke-dashoffset:${offset}"/>
        </svg>
        <div class="ring-center">
          <div class="ring-num">${urlTrust}%</div>
          <div class="ring-unit">tin c·∫≠y</div>
        </div>
      </div>
    </div>
    <div class="card ai ai2" style="margin-top:16px">
      <div class="dc-hd" style="margin-bottom:14px"><span class="ic2">üåê</span>K·∫øt qu·∫£ ph√¢n t√≠ch URL (Prototype)</div>
      <div class="sig ${trustColor==='g'?'g':trustColor==='y'?'y':'r'} ai"><span class="sig-dot"></span>Domain: <b>${domain}</b> ‚Äì ${trusted.some(d=>domain.includes(d))?'‚úÖ N·∫±m trong danh s√°ch b√°o uy t√≠n.':suspicious_domains.some(d=>domain.includes(d))?'‚ö†Ô∏è Ph√°t hi·ªán n·ªÅn t·∫£ng blog, kh√¥ng ph·∫£i b√°o ch√≠nh th·ªëng.':fake_tlds.some(t=>domain.endsWith(t))?'üö® TLD ƒë√°ng ng·ªù ('+fake_tlds.find(t=>domain.endsWith(t))+')':'‚ùî Domain kh√¥ng c√≥ trong danh s√°ch ƒë√£ bi·∫øt.'}</div>
      <div class="sig b ai ai2"><span class="sig-dot"></span>URL path: <b>${new URL(url).pathname.slice(0,60)}</b></div>
      <div class="sig y ai ai3"><span class="sig-dot"></span>‚ö†Ô∏è ƒê√¢y l√† ph√¢n t√≠ch prototype d·ª±a tr√™n domain. Phi√™n b·∫£n th·ª±c t·∫ø s·∫Ω crawl to√†n b·ªô n·ªôi dung v√† ph√¢n t√≠ch b·∫±ng AI.</div>
      <div style="margin-top:14px;padding:12px 14px;border-radius:8px;border:1px solid var(--s3);background:var(--s0);font-size:.84rem;color:var(--s7)">
        <b>G·ª£i √Ω:</b> ƒê·ªÉ ki·ªÉm tra n·ªôi dung th·ª±c t·∫ø c·ªßa link n√†y, h√£y m·ªü link, sao ch√©p n·ªôi dung b√†i vi·∫øt v√† d√°n v√†o tab <b>"Nh·∫≠p vƒÉn b·∫£n"</b> ƒë·ªÉ ph√¢n t√≠ch chi ti·∫øt h∆°n.
      </div>
    </div>`;
    document.getElementById('result-url').innerHTML = html;
    // Trigger ring
    requestAnimationFrame(() => {
      const rf2 = document.getElementById('rf2');
      if (rf2) { rf2.style.transition='stroke-dashoffset 1.4s ease'; rf2.style.strokeDashoffset=offset; }
    });
    setLoading('btn2','bi2','bt2','sp2','shim2',false,'üîó','Ph√¢n t√≠ch l·∫°i URL');
    document.getElementById('result-url').scrollIntoView({behavior:'smooth',block:'start'});
  }, 2200 + Math.random()*600);
}

/* ================================================
   HELPERS
================================================ */
function setLoading(btnId,icId,txId,spId,shId,loading,icon,text) {
  const btn=document.getElementById(btnId);
  const ic=document.getElementById(icId);
  const tx=document.getElementById(txId);
  const sp=document.getElementById(spId);
  const sh=document.getElementById(shId);
  btn.disabled = loading;
  ic.style.display = loading ? 'none' : 'inline';
  sp.style.display = loading ? 'block' : 'none';
  tx.textContent   = text;
  if (sh) { sh.classList.toggle('go', loading); }
}

function switchTab(name, btn) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('panel-'+name).classList.add('active');
  btn.classList.add('active');
}

function fill(type) {
  document.getElementById('txt').value = SAMPLES[type];
  document.getElementById('cnum').textContent = SAMPLES[type].length;
  document.getElementById('wnum').textContent = SAMPLES[type].trim().split(/\s+/).length;
}

function fillUrl(url) { document.getElementById('urlInp').value = url; }

function clearAll() {
  document.getElementById('txt').value = '';
  document.getElementById('cnum').textContent = '0';
  document.getElementById('wnum').textContent = '0';
  document.getElementById('result').innerHTML = '';
  document.getElementById('loadCard').style.display = 'none';
}

// Char/word counter
document.getElementById('txt').addEventListener('input',function(){
  document.getElementById('cnum').textContent = this.value.length;
  document.getElementById('wnum').textContent = this.value.trim() ? this.value.trim().split(/\s+/).length : 0;
});

// Ctrl+Enter shortcut
document.getElementById('txt').addEventListener('keydown',e=>{
  if((e.ctrlKey||e.metaKey)&&e.key==='Enter') analyze();
});

// Scroll reveal
const obs = new IntersectionObserver(entries=>{
  entries.forEach(e=>{if(e.isIntersecting)e.target.classList.add('in')});
},{threshold:.1});
document.querySelectorAll('.fade-up').forEach(el=>obs.observe(el));
</script>
</body>
</html>
